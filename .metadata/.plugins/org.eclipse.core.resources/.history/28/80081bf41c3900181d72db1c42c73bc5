package com.gammas.geoex.items;

import java.util.List;

import com.gammas.geoc.api.ItemLists;
import com.gammas.geoc.api.item.ICrushable;
import com.gammas.geoc.api.item.IItemProperties;

import net.minecraft.client.util.ITooltipFlag;
import net.minecraft.entity.Entity;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.item.Item;
import net.minecraft.item.ItemStack;
import net.minecraft.nbt.NBTTagCompound;
import net.minecraft.util.ActionResult;
import net.minecraft.util.EnumActionResult;
import net.minecraft.util.EnumHand;
import net.minecraft.world.World;
import net.minecraftforge.fml.common.Optional;

@Optional.Interface(iface = "com.gammas.geoc.api.item.ICrushable", modid = "geoc")
public class ItemCrushable extends BaseItem implements ICrushable, IItemProperties{

	private Item crushedResult;
	private float qualityLevel = 5f, hardness = 0.2f;
	
	public ItemCrushable(String name, Item crushedResult, int crushedAmount) {
		super(name);
		
		NBTTagCompound nbt;
		nbt = new NBTTagCompound();

		nbt.setFloat("quality", getQualityLevel());
		nbt.setFloat("hardness", getHardness());
		this.updateItemStackNBT(nbt);
		
		ItemLists.addCrushableItem(this);
		this.crushedResult = crushedResult;
	}

	@Optional.Method(modid = "geoc")
	@Override
	public ItemStack getCrushedResult() {
		return new ItemStack(crushedResult, 2);
	}

	@Override
	public float getQualityLevel() {
		return qualityLevel;
	}

	@Override
	public void setQualityLevel(float qualityLevel) {
		this.qualityLevel = qualityLevel;
	}

	@Override
	public float getHardness() {
		return hardness;
	}

	@Override
	public void setHardness(float hardness) {
		this.hardness = hardness;
	}
	
	@Override
	public void addInformation(ItemStack stack, World worldIn, List<String> tooltip, ITooltipFlag flagIn) {
		if (stack.hasTagCompound()) {
			NBTTagCompound nbt = stack.getTagCompound();

			if (nbt.hasKey("quality"))
				tooltip.add("Quality: " + nbt.getFloat("quality"));
			if (nbt.hasKey("hardness"))
				tooltip.add("Hardness: " + nbt.getFloat("hardness"));
		}
	}

}
