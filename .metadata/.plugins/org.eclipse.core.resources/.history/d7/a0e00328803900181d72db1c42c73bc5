package com.gammas.geoex.items;

import java.util.List;

import com.gammas.geoc.api.RecipeHolder;

import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.item.ItemStack;
import net.minecraft.util.ActionResult;
import net.minecraft.util.EnumActionResult;
import net.minecraft.util.EnumFacing;
import net.minecraft.util.EnumHand;
import net.minecraft.util.math.BlockPos;
import net.minecraft.world.World;

public class ItemWoodenGoldPan extends BaseItem {

	public ItemWoodenGoldPan(String name) {
		super(name);
	}

	@Override
	public EnumActionResult onItemUse(EntityPlayer player, World worldIn, BlockPos pos, EnumHand hand,
			EnumFacing facing, float hitX, float hitY, float hitZ) {
		// CHECK AND SEE IF THE PLAYER IS HOLDING A DUST IN THEIR OFF HAND
		System.out.println("Pan right clicked!");
		if (RecipeHolder.getPanningRecipe(player.getHeldItemOffhand()).get(0) != ItemStack.EMPTY) {
			System.out.println("Recipe found!");
			ItemStack offHand = player.getHeldItemOffhand();
			List<ItemStack> recipe = RecipeHolder.getPanningRecipe(offHand);

			// The player has enough of the dust in their hand
			if (offHand.getCount() > recipe.get(0).getCount()) {
				System.out.println("Recipe input confirmed!");
				System.out.println("Player is in water!");
				offHand.shrink(recipe.get(0).getCount());

				for (int i = 1; i < recipe.size(); i++) {
					playerIn.addItemStackToInventory(recipe.get(i));

					return new ActionResult(EnumActionResult.SUCCESS, playerIn.getHeldItemMainhand());
				}
			}
		}

	}

	@Override
	public ActionResult<ItemStack> onItemRightClick(World worldIn, EntityPlayer playerIn, EnumHand handIn) {

		return new ActionResult(EnumActionResult.FAIL, playerIn.getHeldItemMainhand());
	}

}
